!function(){"use strict";function e(){try{if("undefined"!=typeof localStorage){const e=localStorage.getItem("levelup-theme-mode");if("light"===e||"dark"===e)return e}}catch(e){console.warn("Fehler beim Lesen des LevelUp Themes:",e)}return"light"}function t(e,t){let o=!1,l={x:0,y:0};const r=t=>{if(!o)return;const r=window.innerWidth-e.offsetWidth-8,n=window.innerHeight-e.offsetHeight-8,s=Math.max(8,Math.min(r,t.clientX+l.x)),d=Math.max(8,Math.min(n,t.clientY+l.y));e.style.left=s+"px",e.style.top=d+"px",e.style.right="auto",e.style.bottom="auto"},n=()=>{o=!1,document.body.style.userSelect=""};return t.addEventListener("mousedown",(t=>{if(0!==t.button)return;o=!0;const r=e.getBoundingClientRect();l.x=r.left-t.clientX,l.y=r.top-t.clientY,document.body.style.userSelect="none"})),window.addEventListener("mousemove",r),window.addEventListener("mouseup",n),{mousemove:r,mouseup:n}}const o=e=>document.createElement(e),l=(e="")=>{const t=String.fromCharCode(91),o=String.fromCharCode(93),l=String.fromCharCode(123),r=String.fromCharCode(125),n=[];n.push(t),n.push("0-9a-fA-F"),n.push(o),n.push(l+"8"+r+"-"),n.push(t),n.push("0-9a-fA-F"),n.push(o),n.push(l+"4"+r+"-"),n.push(t),n.push("0-9a-fA-F"),n.push(o),n.push(l+"4"+r+"-"),n.push(t),n.push("0-9a-fA-F"),n.push(o),n.push(l+"4"+r+"-"),n.push(t),n.push("0-9a-fA-F"),n.push(o),n.push(l+"12"+r);const s=n.join(""),d=new RegExp(s),i=(e||"").match(d),a=i?i[0]:e,c=[];c.push(t),c.push(l),c.push(r),c.push(o);const u=c.join(""),p=new RegExp(u,"g");return a.replace(p,"").toLowerCase()};window.__lvlUpOverlay=window.__lvlUpOverlay||{},window.__lvlUpOverlay.createOverlay=function(o,l={}){let r=l.theme;if(!r||"auto"===r)if(l.rootId)try{const t="crmab-overlay-theme-"+l.rootId,o=localStorage.getItem(t);r="light"===o||"dark"===o?o:e()}catch(t){r=e()}else r=e();const n={rootId:l.rootId||null,styleId:l.styleId||null,position:l.position||"top-right",top:l.top,right:l.right,left:l.left,bottom:l.bottom,width:l.width||560,maxHeight:l.maxHeight||"70vh",theme:r,toggle:!1!==l.toggle&&null!==l.rootId,escKey:!1!==l.escKey,draggable:!1!==l.draggable,footer:!1!==l.footer,footerText:l.footerText||"",onClose:l.onClose||null,onToggle:l.onToggle||null,customStyles:l.customStyles||null};if(n.toggle&&n.rootId){const e=document.getElementById(n.rootId);if(e){const t=e._handlers||{};if(t.esc&&document.removeEventListener("keydown",t.esc,{capture:!0}),t.mm&&window.removeEventListener("mousemove",t.mm),t.mu&&window.removeEventListener("mouseup",t.mu),n.styleId){const e=document.getElementById(n.styleId);e&&e.remove()}return e.remove(),n.onToggle&&n.onToggle(!1),n.onClose&&n.onClose(),null}}const s={light:{background:"#fff",color:"#323130",border:"#e1e1e1",headerBg:"#f3f2f1",headerColor:"#323130",closeColor:"#605e5c",footerBg:"#f3f2f1",footerBorder:"#ddd"},dark:{background:"#1f2937",color:"#eef2ff",border:"#374151",headerBg:"#0b1220",headerColor:"#e5e7eb",closeColor:"#cbd5e1",footerBg:"#0b1220",footerBorder:"#374151"}},d=s[n.theme]||s.light;let i=n.top,a=n.right,c=n.left,u=n.bottom;if(!(i||a||c||u))switch(n.position){case"top-left":i=80,c=40;break;case"bottom-right":u=40,a=40;break;case"bottom-left":u=40,c=40;break;default:i=80,a=40}const p=document.createElement("div");n.rootId&&(p.id=n.rootId),p.style.position="fixed",void 0!==i&&(p.style.top=i+"px"),void 0!==a&&(p.style.right=a+"px"),void 0!==c&&(p.style.left=c+"px"),void 0!==u&&(p.style.bottom=u+"px"),p.style.zIndex="999999",p.style.width=n.width+"px",p.style.maxHeight=n.maxHeight,p.style.fontFamily="Segoe UI, Tahoma, Arial",p.style.boxShadow="0 8px 24px rgba(0,0,0,0.2)",p.style.borderRadius="8px",p.style.overflow="hidden",p.style.display="flex",p.style.flexDirection="column",p.style.background=d.background,p.style.color=d.color,p.style.border="1px solid "+d.border;const m=document.createElement("div");m.style.cursor=n.draggable?"move":"default",m.style.padding="10px 14px",m.style.background=d.headerBg,m.style.color=d.headerColor,m.style.display="flex",m.style.alignItems="center",m.style.justifyContent="space-between",m.style.userSelect="none",m.style.borderBottom="1px solid "+d.border;const y=document.createElement("div");y.textContent=o,y.style.fontWeight="600",y.style.fontSize="14px";const h=document.createElement("button");h.textContent="Ã—",h.title="Close",h.style.fontSize="18px",h.style.lineHeight="18px",h.style.border="none",h.style.background="transparent",h.style.color=d.closeColor,h.style.cursor="pointer",h.style.padding="0",h.style.width="24px",h.style.height="24px",h.style.display="flex",h.style.alignItems="center",h.style.justifyContent="center";const g=document.createElement("div");g.style.padding="10px 14px",g.style.overflow="auto",g.style.flex="1";let f=null,v=null,w=null;n.footer&&(f=document.createElement("div"),f.style.display="flex",f.style.justifyContent="space-between",f.style.alignItems="center",f.style.padding="8px 12px",f.style.borderTop="1px solid "+d.footerBorder,f.style.background=d.footerBg,f.style.fontSize="12px",f.style.color=d.color,v=document.createElement("div"),v.style.flex="1",n.footerText&&(v.textContent=n.footerText),w=document.createElement("button"),w.title="dark"===r?"Light mode":"Dark mode",w.textContent="dark"===r?"â˜€ï¸":"ðŸŒ™",w.style.cssText="background:transparent;border:1px solid "+d.border+";color:"+d.color+";padding:4px 8px;border-radius:4px;cursor:pointer;font-size:14px;margin-left:8px;",w.addEventListener("mouseenter",(function(){this.style.background="dark"===r?"rgba(255,255,255,0.1)":"rgba(0,0,0,0.05)"})),w.addEventListener("mouseleave",(function(){this.style.background="transparent"})),w.addEventListener("click",(function(){const e="dark"===r?"light":"dark";if(r=e,x(e),this.textContent="dark"===e?"â˜€ï¸":"ðŸŒ™",this.title="dark"===e?"Light mode":"Dark mode",n.rootId)try{const t="crmab-overlay-theme-"+n.rootId;localStorage.setItem(t,e)}catch(e){}})),f.appendChild(v),f.appendChild(w)),m.appendChild(y),m.appendChild(h),p.appendChild(m),p.appendChild(g),f&&p.appendChild(f),document.body.appendChild(p);const b={},x=e=>{const t=s[e]||s.light;p.style.background=t.background,p.style.color=t.color,p.style.border="1px solid "+t.border,m.style.background=t.headerBg,m.style.color=t.headerColor,m.style.borderBottom="1px solid "+t.border,h.style.color=t.closeColor,f&&(f.style.borderTop="1px solid "+t.footerBorder,f.style.background=t.footerBg,f.style.color=t.color),w&&(w.style.border="1px solid "+t.border,w.style.color=t.color),p.setAttribute("data-theme",e)},C=()=>{if(b.esc&&document.removeEventListener("keydown",b.esc,{capture:!0}),b.mm&&window.removeEventListener("mousemove",b.mm),b.mu&&window.removeEventListener("mouseup",b.mu),n.styleId){const e=document.getElementById(n.styleId);e&&e.remove()}p.remove(),n.onClose&&n.onClose(),n.onToggle&&n.onToggle(!1)};if(h.onclick=C,n.escKey&&(b.esc=e=>{"Escape"===e.key&&document.body.contains(p)&&C()},document.addEventListener("keydown",b.esc,{capture:!0})),n.draggable){const e=t(p,m);b.mm=e.mousemove,b.mu=e.mouseup}if(p._handlers=b,n.customStyles&&n.styleId){const e=document.createElement("style");e.id=n.styleId,e.textContent=n.customStyles,document.head.appendChild(e)}return n.onToggle&&n.onToggle(!0),{host:p,body:g,header:m,footer:f,close:h,handlers:b,closeOverlay:C,updateFooter:e=>{v&&(v.textContent=e)},updateTheme:e=>{if(("light"===e||"dark"===e)&&(r=e,x(e),w)){w.textContent="dark"===e?"â˜€ï¸":"ðŸŒ™",w.title="dark"===e?"Light mode":"Dark mode";const t=s[e]||s.light;w.style.border="1px solid "+t.border,w.style.color=t.color}}}},window.__lvlUpOverlay.makeDraggable=t,window.__lvlUpOverlay.getLevelUpTheme=async function(){try{if("undefined"!=typeof chrome&&chrome.storage&&chrome.storage.local){const e=await chrome.storage.local.get(["levelup-theme-mode"]);if(e["levelup-theme-mode"])return"dark"===e["levelup-theme-mode"]?"dark":"light"}if("undefined"!=typeof localStorage){const e=localStorage.getItem("levelup-theme-mode");if(e&&("light"===e||"dark"===e))return e}if("undefined"!=typeof window&&window.matchMedia){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}}catch(e){console.warn("Fehler beim Lesen des LevelUp Themes:",e)}return"light"},window.__lvlUpOverlay.getLevelUpThemeSync=e,window.__lvlUpOverlay.ce=o,window.__lvlUpOverlay.txt=(e,t)=>(e.textContent=t,e),window.__lvlUpOverlay.style=(e,t)=>(e.style.cssText=t,e),window.__lvlUpOverlay.clearEl=e=>{for(;e.firstChild;)e.removeChild(e.firstChild)},window.__lvlUpOverlay.chunk=(e,t)=>{const o=[];for(let l=0;l<e.length;l+=t)o.push(e.slice(l,l+t));return o},window.__lvlUpOverlay.sanitizeGuid=l,window.__lvlUpOverlay.guidPathValue=(e="")=>l(e),window.__lvlUpOverlay.guidLiteral=(e="",t="'")=>t+l(e)+t,window.__lvlUpOverlay.escapeODataValue=(e="")=>(null==e?"":String(e)).split("'").join("''"),window.__lvlUpOverlay.downloadFile=(e,t,l)=>{const r=[];r.push(e);const n=new Blob(r,{type:l}),s=URL.createObjectURL(n),d=o("a");d.href=s,d.download=t,d.click(),URL.revokeObjectURL(s)},window.__lvlUpOverlay.version="2.0.2"}();